webpackJsonp([2,0],[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=r(30),o=n(i),a=r(26),l=n(a);new o.default({el:"#app",template:"<App/>",components:{App:l.default}})},,,,,,,function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=r(5),o=n(i),a=o.line().x(function(t){return t[0]}).y(function(t){return t[1]}),l=function(t){return t.map(function(t){return a([t[0],t[1]])}).join("")},s=function(t){return t*t},u=function(t,e){return s(t[0]-e[0])+s(t[1]-e[1])},d=function(t,e,r){var n=u(e,r);if(0===n)return u(t,e);var i=((t[0]-e[0])*(r[0]-e[0])+(t[1]-e[1])*(r[1]-e[1]))/n;return i=Math.max(0,Math.min(1,i)),u(t,[e[0]+i*(r[0]-e[0]),e[1]+i*(r[1]-e[1])])},c=function(t,e,r){return Math.sqrt(d(t,r,e))},h=function(t,e){var r=t,n=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]);return n<i?r[0]=e[0]:r[1]=e[1],r},f=function(t){return t[0][1]===t[1][1]},p=function(t,e){var r=t,n=[e[0][0],e[1][0]],i=[e[0][1],e[1][1]];return f(e)?t[0]<Math.min.apply(null,n)?r[0]=Math.min.apply(null,n):t[0]>Math.max.apply(null,n)&&(r[0]=Math.max.apply(null,n)):t[1]<Math.min.apply(null,i)?r[1]=Math.min.apply(null,i):t[1]>Math.max.apply(null,i)&&(r[1]=Math.max.apply(null,i)),r};e.default={coordToLine:a,coordPairsToLine:l,distanceToSegment:c,alignPoint:h,isHorizontal:f,clampPointToSegment:p}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(27),o=n(i);e.default={name:"app",components:{Blueprint:o.default}}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(10),a=i(o),l=r(5),s=n(l),u=r(7),d=i(u),c={OUTSIDEWALLS:"outsidewalls",INSIDEWALLS1:"insidewalls1",INSIDEWALLS2:"insidewalls2"},h=function(t){var e=t;e.drawMode=c.OUTSIDEWALLS,s.select("svg").on("click",function(){e.drawMode===c.OUTSIDEWALLS?(e.instructionMessage="Now keep drawing the wall. Connect to first corner when ready",e.exteriorWallpoints.push(e.nextCoord)):e.drawMode===c.INSIDEWALLS1?(e.instructionMessage="Now select the end for the interior wall",e.currentInteriorWall=[e.nextCoord],e.currentInteriorWallOrigin=e.nearestWall.line,e.drawMode=c.INSIDEWALLS2):e.drawMode===c.INSIDEWALLS2&&(e.instructionMessage="Add an interior wall by selecting a point or press save",e.currentInteriorWall[1]=e.nextCoord,e.interiorWalls.push(e.currentInteriorWall),e.currentInteriorWall=[],e.drawMode=c.INSIDEWALLS1)}).on("mousemove",function(){e.hoverCoord=s.mouse(this)}),s.select(".exteriorBeginGuide").on("click",function(){var t=e.exteriorWallpoints.pop(),r=d.default.alignPoint(t,e.exteriorWallpoints[0]);e.exteriorWallpoints.push(r),e.exteriorWallpoints.push(e.exteriorWallpoints[0]),e.drawMode=c.INSIDEWALLS1,e.ready=!0,e.instructionMessage="Now start drawing an interior wall by selecting a point. Or you can save if ready",s.event.stopPropagation()})};e.default={name:"blueprint",data:function(){return{editMode:!0,ready:!1,exteriorWallpoints:[],interiorWalls:[],hoverCoord:[0,0],drawMode:"",instructionMessage:"Start by selecting the house corner",currentInteriorWall:[],currentInteriorWallOrigin:[],distanceFactor:.025,snapDistance:50}},computed:{exteriorWallsPath:function(){return d.default.coordToLine(this.exteriorWallpoints)},interiorWallsPath:function(){return d.default.coordPairsToLine(this.interiorWalls)},previewPath:function(){var t="";if(this.drawMode===c.OUTSIDEWALLS){if(0===this.exteriorWallpoints.length)return d.default.coordToLine([]);var e=this.exteriorWallpoints[this.exteriorWallpoints.length-1],r=[e,this.nextCoord];t=d.default.coordToLine(r)}else this.drawMode===c.INSIDEWALLS1?t=d.default.coordToLine([]):this.drawMode===c.INSIDEWALLS2&&(t=d.default.coordToLine([this.nextCoord,this.currentInteriorWall[0]]));return t},nextCoord:function(){var t=[];if(this.drawMode===c.OUTSIDEWALLS){if(0===this.exteriorWallpoints.length)return this.hoverCoord;var e=this.exteriorWallpoints[this.exteriorWallpoints.length-1];t=d.default.alignPoint(this.hoverCoord,e)}else this.drawMode!==c.INSIDEWALLS1&&this.drawMode!==c.INSIDEWALLS2||(t=this.nearestWall.distance<this.snapDistance?this.nearestWall.wallPoint:this.hoverCoord);return this.drawMode===c.INSIDEWALLS2&&(t=d.default.alignPoint(t,this.currentInteriorWall[0])),t},xGuidePath:function(){return 0===this.nextCoord.length?d.default.coordToLine([]):d.default.coordToLine([[0,this.nextCoord[1]],[1200,this.nextCoord[1]]])},yGuidePath:function(){return 0===this.nextCoord.length?d.default.coordToLine([]):d.default.coordToLine([[this.nextCoord[0],0],[this.nextCoord[0],800]])},exteriorBeginGuide:function(){if(0===this.exteriorWallpoints.length)return{x:-100,y:-100};var t=this.exteriorWallpoints[0];return{x:t[0],y:t[1]}},guideVisibility:function(){return this.editMode?"visible":"hidden"},wallMeasurements:function(){var t=this,e=this.exteriorWallpoints.map(function(e,r){if(0===r)return null;var n=t.exteriorWallpoints[r-1],i=n[0]+e[0],o=n[1]+e[1],a=i/2,l=o/2,s=Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2));return{x:a,y:l,value:(s*t.distanceFactor).toFixed(1)+"m"}}).filter(function(t){return null!==t});if(this.editMode&&void 0!==this.nextCoord&&this.exteriorWallpoints.length>0){var r=this.exteriorWallpoints[this.exteriorWallpoints.length-1],n=r[0]+this.nextCoord[0],i=r[1]+this.nextCoord[1],o=n/2,a=i/2,l=Math.sqrt(Math.pow(this.nextCoord[0]-r[0],2)+Math.pow(this.nextCoord[1]-r[1],2)),s={x:o,y:a,value:(l*this.distanceFactor).toFixed(1)+"m"};e.push(s)}return e},straightPathToNearestWall:function(){var t=this.nearestWall.line,e=t[0][1]===t[1][1];return e?d.default.coordToLine([this.hoverCoord,[this.hoverCoord[0],t[0][1]]]):d.default.coordToLine([this.hoverCoord,[t[0][0],this.hoverCoord[1]]])},nearestWall:function(){var t=this,e={line:[[],[]],distance:a.default,path:"",wallPoint:[]};return this.exteriorWallpoints.forEach(function(r,n){if(0!==n){var i=t.exteriorWallpoints[n-1],o=[i,r],a=d.default.distanceToSegment(t.hoverCoord,o[0],o[1]),l=o[0][1]===o[1][1],s=l?[t.hoverCoord[0],o[0][1]]:[o[0][0],t.hoverCoord[1]],u=d.default.clampPointToSegment(s,o),c=d.default.coordToLine([t.hoverCoord,u]);a<e.distance&&(e={line:o,distance:a,path:c,wallPoint:u})}}),this.interiorWalls.forEach(function(r){var n=d.default.distanceToSegment(t.hoverCoord,r[0],r[1]),i=r[0][1]===r[1][1],o=i?[t.hoverCoord[0],r[0][1]]:[r[0][0],t.hoverCoord[1]],a=d.default.clampPointToSegment(o,r),l=d.default.coordToLine([t.hoverCoord,a]);n<e.distance&&(e={line:r,distance:n,path:l,wallPoint:a})}),e}},methods:{save:function(){this.editMode=!1,this.instructionMessage="It's gone."}},mounted:function(){h(this)}}},,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e,r){r(24);var n=r(6)(r(8),r(28),null,null);t.exports=n.exports},function(t,e,r){r(25);var n=r(6)(r(9),r(29),"data-v-6efa3f6e",null);t.exports=n.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Blueprint")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tool-wrapper"},[t.ready?r("button",{on:{click:t.save}},[t._v("Save")]):t._e(),t._v(" "),r("svg",{staticClass:"canvas"},[r("g",{staticClass:"walls"},[r("path",{staticClass:"exteriorWall",attrs:{d:t.exteriorWallsPath}}),t._v(" "),r("path",{staticClass:"interiorWall",attrs:{d:t.interiorWallsPath}}),t._v(" "),r("path",{staticClass:"wallPreview",attrs:{d:t.previewPath}})]),t._v(" "),r("g",{staticClass:"guides",attrs:{visibility:t.guideVisibility}},[r("path",{staticClass:"guideline",attrs:{d:t.xGuidePath}}),t._v(" "),r("path",{staticClass:"guideline",attrs:{d:t.yGuidePath}}),t._v(" "),r("circle",{staticClass:"guidePoint",attrs:{cx:t.nextCoord[0],cy:t.nextCoord[1],r:"10"}}),t._v(" "),t.currentInteriorWall.length>0?r("circle",{staticClass:"guidePoint",attrs:{cx:t.currentInteriorWall[0][0],cy:t.currentInteriorWall[0][1],r:"10"}}):t._e(),t._v(" "),t._l(t.wallMeasurements,function(t){return r("rect",{staticClass:"measurementRect",attrs:{x:t.x-50,y:t.y-30,width:"100",height:"30"}})}),t._v(" "),t._l(t.wallMeasurements,function(e){return r("text",{attrs:{x:e.x-20,y:e.y-10}},[t._v(t._s(e.value))])}),t._v(" "),r("circle",{staticClass:"exteriorBeginGuide",attrs:{cx:t.exteriorBeginGuide.x,cy:t.exteriorBeginGuide.y,r:"10"}})],2)]),t._v("\n  "+t._s(t.instructionMessage)+"\n")])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.0a241aa3dff3e2380e86.js.map