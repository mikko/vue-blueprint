{"version":3,"sources":["webpack:///static/js/app.0a241aa3dff3e2380e86.js","webpack:///./src/main.js","webpack:///./src/util/blueprintUtil.js","webpack:///App.vue","webpack:///Blueprint.vue","webpack:///./src/App.vue","webpack:///./src/components/Blueprint.vue","webpack:///./src/App.vue?76f3","webpack:///./src/components/Blueprint.vue?7404"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","el","template","components","App","_interopRequireWildcard","newObj","key","Object","prototype","hasOwnProperty","call","defineProperty","value","_d","d3","coordToLine","line","x","coord","y","coordPairsToLine","cPairs","map","pair","join","sqr","dist2","v","w","distToSegmentSquared","p","l2","t","Math","max","min","distanceToSegment","sqrt","alignPoint","point","target","alignedPoint","xDiff","abs","yDiff","isHorizontal","clampPointToSegment","lineSegment","clampedPoint","segmentXs","segmentYs","apply","_Blueprint","_Blueprint2","name","Blueprint","_maxSafeInteger","_maxSafeInteger2","_blueprintUtil","_blueprintUtil2","drawModes","OUTSIDEWALLS","INSIDEWALLS1","INSIDEWALLS2","initDraw","vueThis","vue","drawMode","select","on","instructionMessage","exteriorWallpoints","push","nextCoord","currentInteriorWall","currentInteriorWallOrigin","nearestWall","interiorWalls","hoverCoord","mouse","this","lastWallpoint","pop","alignedLastPoint","ready","event","stopPropagation","data","editMode","distanceFactor","snapDistance","computed","exteriorWallsPath","interiorWallsPath","previewPath","path","length","prevWallpoint","guideCoords","distance","wallPoint","xGuidePath","yGuidePath","exteriorBeginGuide","startPoint","guideVisibility","wallMeasurements","_this","measurementPoints","index","prevPoint","pow","toFixed","filter","undefined","cursorPoint","straightPathToNearestWall","_this2","nearestLine","forEach","unclampedWallPoint","wall","methods","save","mounted","Component","render","_vm","_h","$createElement","_c","_self","attrs","id","staticRenderFns","staticClass","click","_v","_e","d","visibility","cx","cy","r","_l","width","height","_s"],"mappings":"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","file":"static/js/app.0a241aa3dff3e2380e86.js","sourcesContent":["webpackJsonp([2,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(30);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(26);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _vue2.default({\n\t  el: '#app',\n\t  template: '<App/>',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _d = __webpack_require__(5);\n\t\n\tvar d3 = _interopRequireWildcard(_d);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar coordToLine = d3.line().x(function (coord) {\n\t  return coord[0];\n\t}).y(function (coord) {\n\t  return coord[1];\n\t});\n\t\n\tvar coordPairsToLine = function coordPairsToLine(cPairs) {\n\t  return cPairs.map(function (pair) {\n\t    return coordToLine([pair[0], pair[1]]);\n\t  }).join('');\n\t};\n\t\n\tvar sqr = function sqr(x) {\n\t  return x * x;\n\t};\n\tvar dist2 = function dist2(v, w) {\n\t  return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n\t};\n\tvar distToSegmentSquared = function distToSegmentSquared(p, v, w) {\n\t  var l2 = dist2(v, w);\n\t  if (l2 === 0) {\n\t    return dist2(p, v);\n\t  }\n\t  var t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n\t  t = Math.max(0, Math.min(1, t));\n\t  return dist2(p, [v[0] + t * (w[0] - v[0]), v[1] + t * (w[1] - v[1])]);\n\t};\n\tvar distanceToSegment = function distanceToSegment(p, w, v) {\n\t  return Math.sqrt(distToSegmentSquared(p, v, w));\n\t};\n\t\n\tvar alignPoint = function alignPoint(point, target) {\n\t  var alignedPoint = point;\n\t  var xDiff = Math.abs(point[0] - target[0]);\n\t  var yDiff = Math.abs(point[1] - target[1]);\n\t  if (xDiff < yDiff) {\n\t    alignedPoint[0] = target[0];\n\t  } else {\n\t    alignedPoint[1] = target[1];\n\t  }\n\t  return alignedPoint;\n\t};\n\t\n\tvar isHorizontal = function isHorizontal(line) {\n\t  return line[0][1] === line[1][1];\n\t};\n\t\n\tvar clampPointToSegment = function clampPointToSegment(point, lineSegment) {\n\t  var clampedPoint = point;\n\t  var segmentXs = [lineSegment[0][0], lineSegment[1][0]];\n\t  var segmentYs = [lineSegment[0][1], lineSegment[1][1]];\n\t  if (isHorizontal(lineSegment)) {\n\t    if (point[0] < Math.min.apply(null, segmentXs)) {\n\t      clampedPoint[0] = Math.min.apply(null, segmentXs);\n\t    } else if (point[0] > Math.max.apply(null, segmentXs)) {\n\t      clampedPoint[0] = Math.max.apply(null, segmentXs);\n\t    }\n\t  } else if (point[1] < Math.min.apply(null, segmentYs)) {\n\t    clampedPoint[1] = Math.min.apply(null, segmentYs);\n\t  } else if (point[1] > Math.max.apply(null, segmentYs)) {\n\t    clampedPoint[1] = Math.max.apply(null, segmentYs);\n\t  }\n\t  return clampedPoint;\n\t};\n\t\n\texports.default = {\n\t  coordToLine: coordToLine,\n\t  coordPairsToLine: coordPairsToLine,\n\t  distanceToSegment: distanceToSegment,\n\t  alignPoint: alignPoint,\n\t  isHorizontal: isHorizontal,\n\t  clampPointToSegment: clampPointToSegment\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Blueprint = __webpack_require__(27);\n\t\n\tvar _Blueprint2 = _interopRequireDefault(_Blueprint);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  name: 'app',\n\t  components: {\n\t    Blueprint: _Blueprint2.default\n\t  }\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _maxSafeInteger = __webpack_require__(10);\n\t\n\tvar _maxSafeInteger2 = _interopRequireDefault(_maxSafeInteger);\n\t\n\tvar _d = __webpack_require__(5);\n\t\n\tvar d3 = _interopRequireWildcard(_d);\n\t\n\tvar _blueprintUtil = __webpack_require__(7);\n\t\n\tvar _blueprintUtil2 = _interopRequireDefault(_blueprintUtil);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar drawModes = {\n\t  OUTSIDEWALLS: 'outsidewalls',\n\t  INSIDEWALLS1: 'insidewalls1',\n\t  INSIDEWALLS2: 'insidewalls2' };\n\t\n\tvar initDraw = function initDraw(vueThis) {\n\t  var vue = vueThis;\n\t\n\t  vue.drawMode = drawModes.OUTSIDEWALLS;\n\t\n\t  d3.select('svg').on('click', function () {\n\t    if (vue.drawMode === drawModes.OUTSIDEWALLS) {\n\t      vue.instructionMessage = 'Now keep drawing the wall. Connect to first corner when ready';\n\t      vue.exteriorWallpoints.push(vue.nextCoord);\n\t    } else if (vue.drawMode === drawModes.INSIDEWALLS1) {\n\t      vue.instructionMessage = 'Now select the end for the interior wall';\n\t      vue.currentInteriorWall = [vue.nextCoord];\n\t      vue.currentInteriorWallOrigin = vue.nearestWall.line;\n\t      vue.drawMode = drawModes.INSIDEWALLS2;\n\t    } else if (vue.drawMode === drawModes.INSIDEWALLS2) {\n\t      vue.instructionMessage = 'Add an interior wall by selecting a point or press save';\n\t      vue.currentInteriorWall[1] = vue.nextCoord;\n\t      vue.interiorWalls.push(vue.currentInteriorWall);\n\t      vue.currentInteriorWall = [];\n\t      vue.drawMode = drawModes.INSIDEWALLS1;\n\t    }\n\t  }).on('mousemove', function boundMouseover() {\n\t    vue.hoverCoord = d3.mouse(this);\n\t  });\n\t\n\t  d3.select('.exteriorBeginGuide').on('click', function () {\n\t    var lastWallpoint = vue.exteriorWallpoints.pop();\n\t    var alignedLastPoint = _blueprintUtil2.default.alignPoint(lastWallpoint, vue.exteriorWallpoints[0]);\n\t    vue.exteriorWallpoints.push(alignedLastPoint);\n\t    vue.exteriorWallpoints.push(vue.exteriorWallpoints[0]);\n\t    vue.drawMode = drawModes.INSIDEWALLS1;\n\t    vue.ready = true;\n\t    vue.instructionMessage = 'Now start drawing an interior wall by selecting a point. Or you can save if ready';\n\t    d3.event.stopPropagation();\n\t  });\n\t};\n\t\n\texports.default = {\n\t  name: 'blueprint',\n\t  data: function data() {\n\t    return {\n\t      editMode: true,\n\t      ready: false,\n\t      exteriorWallpoints: [],\n\t      interiorWalls: [],\n\t      hoverCoord: [0, 0],\n\t      drawMode: '',\n\t      instructionMessage: 'Start by selecting the house corner',\n\t      currentInteriorWall: [],\n\t      currentInteriorWallOrigin: [],\n\t      distanceFactor: 0.025,\n\t      snapDistance: 50\n\t    };\n\t  },\n\t\n\t  computed: {\n\t    exteriorWallsPath: function exteriorWallsPath() {\n\t      return _blueprintUtil2.default.coordToLine(this.exteriorWallpoints);\n\t    },\n\t    interiorWallsPath: function interiorWallsPath() {\n\t      return _blueprintUtil2.default.coordPairsToLine(this.interiorWalls);\n\t    },\n\t    previewPath: function previewPath() {\n\t      var path = '';\n\t      if (this.drawMode === drawModes.OUTSIDEWALLS) {\n\t        if (this.exteriorWallpoints.length === 0) {\n\t          return _blueprintUtil2.default.coordToLine([]);\n\t        }\n\t        var prevWallpoint = this.exteriorWallpoints[this.exteriorWallpoints.length - 1];\n\t        var guideCoords = [prevWallpoint, this.nextCoord];\n\t        path = _blueprintUtil2.default.coordToLine(guideCoords);\n\t      } else if (this.drawMode === drawModes.INSIDEWALLS1) {\n\t        path = _blueprintUtil2.default.coordToLine([]);\n\t      } else if (this.drawMode === drawModes.INSIDEWALLS2) {\n\t        path = _blueprintUtil2.default.coordToLine([this.nextCoord, this.currentInteriorWall[0]]);\n\t      }\n\t      return path;\n\t    },\n\t    nextCoord: function nextCoord() {\n\t      var coord = [];\n\t\n\t      if (this.drawMode === drawModes.OUTSIDEWALLS) {\n\t        if (this.exteriorWallpoints.length === 0) {\n\t          return this.hoverCoord;\n\t        }\n\t        var prevWallpoint = this.exteriorWallpoints[this.exteriorWallpoints.length - 1];\n\t        coord = _blueprintUtil2.default.alignPoint(this.hoverCoord, prevWallpoint);\n\t      } else if (this.drawMode === drawModes.INSIDEWALLS1 || this.drawMode === drawModes.INSIDEWALLS2) {\n\t        if (this.nearestWall.distance < this.snapDistance) {\n\t          coord = this.nearestWall.wallPoint;\n\t        } else {\n\t          coord = this.hoverCoord;\n\t        }\n\t      }\n\t\n\t      if (this.drawMode === drawModes.INSIDEWALLS2) {\n\t        coord = _blueprintUtil2.default.alignPoint(coord, this.currentInteriorWall[0]);\n\t      }\n\t\n\t      return coord;\n\t    },\n\t    xGuidePath: function xGuidePath() {\n\t      if (this.nextCoord.length === 0) {\n\t        return _blueprintUtil2.default.coordToLine([]);\n\t      }\n\t      return _blueprintUtil2.default.coordToLine([[0, this.nextCoord[1]], [1200, this.nextCoord[1]]]);\n\t    },\n\t    yGuidePath: function yGuidePath() {\n\t      if (this.nextCoord.length === 0) {\n\t        return _blueprintUtil2.default.coordToLine([]);\n\t      }\n\t      return _blueprintUtil2.default.coordToLine([[this.nextCoord[0], 0], [this.nextCoord[0], 800]]);\n\t    },\n\t    exteriorBeginGuide: function exteriorBeginGuide() {\n\t      if (this.exteriorWallpoints.length === 0) {\n\t        return { x: -100, y: -100 };\n\t      }\n\t      var startPoint = this.exteriorWallpoints[0];\n\t      return {\n\t        x: startPoint[0],\n\t        y: startPoint[1]\n\t      };\n\t    },\n\t    guideVisibility: function guideVisibility() {\n\t      return this.editMode ? 'visible' : 'hidden';\n\t    },\n\t    wallMeasurements: function wallMeasurements() {\n\t      var _this = this;\n\t\n\t      var measurementPoints = this.exteriorWallpoints.map(function (point, index) {\n\t        if (index === 0) {\n\t          return null;\n\t        }\n\t        var prevPoint = _this.exteriorWallpoints[index - 1];\n\t        var xDiff = prevPoint[0] + point[0];\n\t        var yDiff = prevPoint[1] + point[1];\n\t        var x = xDiff / 2;\n\t        var y = yDiff / 2;\n\t        var value = Math.sqrt(Math.pow(point[0] - prevPoint[0], 2) + Math.pow(point[1] - prevPoint[1], 2));\n\t        return {\n\t          x: x,\n\t          y: y,\n\t          value: (value * _this.distanceFactor).toFixed(1) + 'm'\n\t        };\n\t      }).filter(function (point) {\n\t        return point !== null;\n\t      });\n\t      if (this.editMode && this.nextCoord !== undefined && this.exteriorWallpoints.length > 0) {\n\t        var prevPoint = this.exteriorWallpoints[this.exteriorWallpoints.length - 1];\n\t        var xDiff = prevPoint[0] + this.nextCoord[0];\n\t        var yDiff = prevPoint[1] + this.nextCoord[1];\n\t        var x = xDiff / 2;\n\t        var y = yDiff / 2;\n\t        var value = Math.sqrt(Math.pow(this.nextCoord[0] - prevPoint[0], 2) + Math.pow(this.nextCoord[1] - prevPoint[1], 2));\n\t        var cursorPoint = {\n\t          x: x,\n\t          y: y,\n\t          value: (value * this.distanceFactor).toFixed(1) + 'm'\n\t        };\n\t        measurementPoints.push(cursorPoint);\n\t      }\n\t      return measurementPoints;\n\t    },\n\t    straightPathToNearestWall: function straightPathToNearestWall() {\n\t      var line = this.nearestWall.line;\n\t\n\t      var isHorizontal = line[0][1] === line[1][1];\n\t      return isHorizontal ? _blueprintUtil2.default.coordToLine([this.hoverCoord, [this.hoverCoord[0], line[0][1]]]) : _blueprintUtil2.default.coordToLine([this.hoverCoord, [line[0][0], this.hoverCoord[1]]]);\n\t    },\n\t    nearestWall: function nearestWall() {\n\t      var _this2 = this;\n\t\n\t      var nearestLine = {\n\t        line: [[], []],\n\t        distance: _maxSafeInteger2.default,\n\t        path: '',\n\t        wallPoint: []\n\t      };\n\t\n\t      this.exteriorWallpoints.forEach(function (point, index) {\n\t        if (index === 0) {\n\t          return;\n\t        }\n\t        var prevPoint = _this2.exteriorWallpoints[index - 1];\n\t        var line = [prevPoint, point];\n\t        var distance = _blueprintUtil2.default.distanceToSegment(_this2.hoverCoord, line[0], line[1]);\n\t\n\t        var isHorizontal = line[0][1] === line[1][1];\n\t        var unclampedWallPoint = isHorizontal ? [_this2.hoverCoord[0], line[0][1]] : [line[0][0], _this2.hoverCoord[1]];\n\t        var wallPoint = _blueprintUtil2.default.clampPointToSegment(unclampedWallPoint, line);\n\t        var path = _blueprintUtil2.default.coordToLine([_this2.hoverCoord, wallPoint]);\n\t\n\t        if (distance < nearestLine.distance) {\n\t          nearestLine = {\n\t            line: line,\n\t            distance: distance,\n\t            path: path,\n\t            wallPoint: wallPoint\n\t          };\n\t        }\n\t      });\n\t\n\t      this.interiorWalls.forEach(function (wall) {\n\t        var distance = _blueprintUtil2.default.distanceToSegment(_this2.hoverCoord, wall[0], wall[1]);\n\t        var isHorizontal = wall[0][1] === wall[1][1];\n\t        var unclampedWallPoint = isHorizontal ? [_this2.hoverCoord[0], wall[0][1]] : [wall[0][0], _this2.hoverCoord[1]];\n\t        var wallPoint = _blueprintUtil2.default.clampPointToSegment(unclampedWallPoint, wall);\n\t        var path = _blueprintUtil2.default.coordToLine([_this2.hoverCoord, wallPoint]);\n\t        if (distance < nearestLine.distance) {\n\t          nearestLine = {\n\t            line: wall,\n\t            distance: distance,\n\t            path: path,\n\t            wallPoint: wallPoint\n\t          };\n\t        }\n\t      });\n\t\n\t      return nearestLine;\n\t    }\n\t  },\n\t  methods: {\n\t    save: function save() {\n\t      this.editMode = false;\n\t      this.instructionMessage = 'It\\'s gone.';\n\t    }\n\t  },\n\t  mounted: function mounted() {\n\t    initDraw(this);\n\t  }\n\t};\n\n/***/ },\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(24)\n\t\n\tvar Component = __webpack_require__(6)(\n\t  /* script */\n\t  __webpack_require__(8),\n\t  /* template */\n\t  __webpack_require__(28),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(25)\n\t\n\tvar Component = __webpack_require__(6)(\n\t  /* script */\n\t  __webpack_require__(9),\n\t  /* template */\n\t  __webpack_require__(29),\n\t  /* scopeId */\n\t  \"data-v-6efa3f6e\",\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"app\"\n\t    }\n\t  }, [_c('Blueprint')], 1)\n\t},staticRenderFns: []}\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"tool-wrapper\"\n\t  }, [(_vm.ready) ? _c('button', {\n\t    on: {\n\t      \"click\": _vm.save\n\t    }\n\t  }, [_vm._v(\"Save\")]) : _vm._e(), _vm._v(\" \"), _c('svg', {\n\t    staticClass: \"canvas\"\n\t  }, [_c('g', {\n\t    staticClass: \"walls\"\n\t  }, [_c('path', {\n\t    staticClass: \"exteriorWall\",\n\t    attrs: {\n\t      \"d\": _vm.exteriorWallsPath\n\t    }\n\t  }), _vm._v(\" \"), _c('path', {\n\t    staticClass: \"interiorWall\",\n\t    attrs: {\n\t      \"d\": _vm.interiorWallsPath\n\t    }\n\t  }), _vm._v(\" \"), _c('path', {\n\t    staticClass: \"wallPreview\",\n\t    attrs: {\n\t      \"d\": _vm.previewPath\n\t    }\n\t  })]), _vm._v(\" \"), _c('g', {\n\t    staticClass: \"guides\",\n\t    attrs: {\n\t      \"visibility\": _vm.guideVisibility\n\t    }\n\t  }, [_c('path', {\n\t    staticClass: \"guideline\",\n\t    attrs: {\n\t      \"d\": _vm.xGuidePath\n\t    }\n\t  }), _vm._v(\" \"), _c('path', {\n\t    staticClass: \"guideline\",\n\t    attrs: {\n\t      \"d\": _vm.yGuidePath\n\t    }\n\t  }), _vm._v(\" \"), _c('circle', {\n\t    staticClass: \"guidePoint\",\n\t    attrs: {\n\t      \"cx\": _vm.nextCoord[0],\n\t      \"cy\": _vm.nextCoord[1],\n\t      \"r\": \"10\"\n\t    }\n\t  }), _vm._v(\" \"), (_vm.currentInteriorWall.length > 0) ? _c('circle', {\n\t    staticClass: \"guidePoint\",\n\t    attrs: {\n\t      \"cx\": _vm.currentInteriorWall[0][0],\n\t      \"cy\": _vm.currentInteriorWall[0][1],\n\t      \"r\": \"10\"\n\t    }\n\t  }) : _vm._e(), _vm._v(\" \"), _vm._l((_vm.wallMeasurements), function(point) {\n\t    return _c('rect', {\n\t      staticClass: \"measurementRect\",\n\t      attrs: {\n\t        \"x\": point.x - 50,\n\t        \"y\": point.y - 30,\n\t        \"width\": \"100\",\n\t        \"height\": \"30\"\n\t      }\n\t    })\n\t  }), _vm._v(\" \"), _vm._l((_vm.wallMeasurements), function(point) {\n\t    return _c('text', {\n\t      attrs: {\n\t        \"x\": point.x - 20,\n\t        \"y\": point.y - 10\n\t      }\n\t    }, [_vm._v(_vm._s(point.value))])\n\t  }), _vm._v(\" \"), _c('circle', {\n\t    staticClass: \"exteriorBeginGuide\",\n\t    attrs: {\n\t      \"cx\": _vm.exteriorBeginGuide.x,\n\t      \"cy\": _vm.exteriorBeginGuide.y,\n\t      \"r\": \"10\"\n\t    }\n\t  })], 2)]), _vm._v(\"\\n  \" + _vm._s(_vm.instructionMessage) + \"\\n\")])\n\t},staticRenderFns: []}\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.0a241aa3dff3e2380e86.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport App from './App';\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import * as d3 from 'd3';\n\nconst coordToLine = d3.line()\n  .x(coord => coord[0])\n  .y(coord => coord[1]);\n\nconst coordPairsToLine = cPairs => cPairs.map(pair => coordToLine([pair[0], pair[1]])).join('');\n\nconst sqr = x => x * x;\nconst dist2 = (v, w) => sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\nconst distToSegmentSquared = (p, v, w) => {\n  const l2 = dist2(v, w);\n  if (l2 === 0) {\n    return dist2(p, v);\n  }\n  let t = (((p[0] - v[0]) * (w[0] - v[0])) + ((p[1] - v[1]) * (w[1] - v[1]))) / l2;\n  t = Math.max(0, Math.min(1, t));\n  return dist2(p, [v[0] + (t * (w[0] - v[0])), v[1] + (t * (w[1] - v[1]))]);\n};\nconst distanceToSegment = (p, w, v) => Math.sqrt(distToSegmentSquared(p, v, w));\n\nconst alignPoint = (point, target) => {\n  const alignedPoint = point;\n  const xDiff = Math.abs(point[0] - target[0]);\n  const yDiff = Math.abs(point[1] - target[1]);\n  if (xDiff < yDiff) {\n    alignedPoint[0] = target[0];\n  } else {\n    alignedPoint[1] = target[1];\n  }\n  return alignedPoint;\n};\n\nconst isHorizontal = line => line[0][1] === line[1][1];\n\nconst clampPointToSegment = (point, lineSegment) => {\n  const clampedPoint = point;\n  const segmentXs = [lineSegment[0][0], lineSegment[1][0]];\n  const segmentYs = [lineSegment[0][1], lineSegment[1][1]];\n  if (isHorizontal(lineSegment)) {\n    if (point[0] < Math.min.apply(null, segmentXs)) {\n      clampedPoint[0] = Math.min.apply(null, segmentXs);\n    } else if (point[0] > Math.max.apply(null, segmentXs)) {\n      clampedPoint[0] = Math.max.apply(null, segmentXs);\n    }\n  } else if (point[1] < Math.min.apply(null, segmentYs)) {\n    clampedPoint[1] = Math.min.apply(null, segmentYs);\n  } else if (point[1] > Math.max.apply(null, segmentYs)) {\n    clampedPoint[1] = Math.max.apply(null, segmentYs);\n  }\n  return clampedPoint;\n};\n\nexport default {\n  coordToLine,\n  coordPairsToLine,\n  distanceToSegment,\n  alignPoint,\n  isHorizontal,\n  clampPointToSegment,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/blueprintUtil.js","<template>\n  <div id=\"app\">\n    <Blueprint></Blueprint>\n  </div>\n</template>\n\n<script>\nimport Blueprint from './components/Blueprint';\n\nexport default {\n  name: 'app',\n  components: {\n    Blueprint,\n  },\n};\n</script>\n\n<style>\nbody, html {\n  height: 100%;\n  width: 100%;\n}\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  background-color: black;\n  padding: 60px;\n  height: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?2ec269dc","<template>\n  <div class=\"tool-wrapper\">\n    <button v-if=\"ready\" v-on:click=\"save\">Save</button>\n    <svg class=\"canvas\">\n      <g class=\"walls\">\n        <path class=\"exteriorWall\" :d=\"exteriorWallsPath\"></path>\n        <path class=\"interiorWall\" :d=\"interiorWallsPath\"></path>\n        <path class=\"wallPreview\" :d=\"previewPath\"></path>\n      </g>\n      <g class=\"guides\" :visibility=\"guideVisibility\" >\n        <path :d=\"xGuidePath\" class=\"guideline\"></path>\n        <path :d=\"yGuidePath\" class=\"guideline\"></path>\n        <circle class=\"guidePoint\" :cx=\"nextCoord[0]\" :cy=\"nextCoord[1]\" r=\"10\"></circle>\n        <circle class=\"guidePoint\" v-if=\"currentInteriorWall.length > 0\" :cx=\"currentInteriorWall[0][0]\" :cy=\"currentInteriorWall[0][1]\" r=\"10\"></circle>\n        <rect class=\"measurementRect\" :x=\"point.x - 50\" :y=\"point.y - 30\" width=\"100\" height=\"30\" v-for=\"point in wallMeasurements\"></rect>\n        <text :x=\"point.x - 20\" :y=\"point.y - 10\" v-for=\"point in wallMeasurements\">{{ point.value }}</text>\n        <circle class=\"exteriorBeginGuide\" :cx=\"exteriorBeginGuide.x\" :cy=\"exteriorBeginGuide.y\" r=\"10\"></circle>\n      </g>\n    </svg>\n    {{ instructionMessage }}\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport util from '../util/blueprintUtil';\n\nconst drawModes = {\n  OUTSIDEWALLS: 'outsidewalls', // Drawing the closed loop of walls\n  INSIDEWALLS1: 'insidewalls1', // Selecting interior wall beginning\n  INSIDEWALLS2: 'insidewalls2', // Selecting interior wall end\n};\n\nconst initDraw = (vueThis) => {\n  const vue = vueThis;\n\n  vue.drawMode = drawModes.OUTSIDEWALLS;\n\n  d3.select('svg')\n    .on('click', () => {\n      if (vue.drawMode === drawModes.OUTSIDEWALLS) {\n        vue.instructionMessage = 'Now keep drawing the wall. Connect to first corner when ready';\n        vue.exteriorWallpoints.push(vue.nextCoord);\n      } else if (vue.drawMode === drawModes.INSIDEWALLS1) {\n        vue.instructionMessage = 'Now select the end for the interior wall';\n        vue.currentInteriorWall = [vue.nextCoord];\n        vue.currentInteriorWallOrigin = vue.nearestWall.line;\n        vue.drawMode = drawModes.INSIDEWALLS2;\n      } else if (vue.drawMode === drawModes.INSIDEWALLS2) {\n        vue.instructionMessage = 'Add an interior wall by selecting a point or press save';\n        vue.currentInteriorWall[1] = vue.nextCoord;\n        vue.interiorWalls.push(vue.currentInteriorWall);\n        vue.currentInteriorWall = [];\n        vue.drawMode = drawModes.INSIDEWALLS1;\n      }\n    })\n    .on('mousemove', function boundMouseover() {\n      vue.hoverCoord = d3.mouse(this);\n    });\n\n  d3.select('.exteriorBeginGuide')\n    .on('click', () => {\n      const lastWallpoint = vue.exteriorWallpoints.pop(); // [vue.exteriorWallpoints.length - 1];\n      // Compensate last point for 90 degree angle\n      const alignedLastPoint = util.alignPoint(lastWallpoint, vue.exteriorWallpoints[0]);\n      vue.exteriorWallpoints.push(alignedLastPoint);\n      vue.exteriorWallpoints.push(vue.exteriorWallpoints[0]);\n      vue.drawMode = drawModes.INSIDEWALLS1;\n      vue.ready = true;\n      vue.instructionMessage = 'Now start drawing an interior wall by selecting a point. Or you can save if ready';\n      d3.event.stopPropagation();\n    });\n};\n\nexport default {\n  name: 'blueprint',\n  data() {\n    return {\n      editMode: true,\n      ready: false,\n      exteriorWallpoints: [],\n      interiorWalls: [],\n      hoverCoord: [0, 0],\n      drawMode: '',\n      instructionMessage: 'Start by selecting the house corner',\n      currentInteriorWall: [],\n      currentInteriorWallOrigin: [],\n      distanceFactor: 0.025,\n      snapDistance: 50,\n    };\n  },\n  computed: {\n    // Path created for drawing an exterior wall through all the coordinates\n    exteriorWallsPath() {\n      return util.coordToLine(this.exteriorWallpoints);\n    },\n    // Path drawing all the interior walls\n    interiorWallsPath() {\n      return util.coordPairsToLine(this.interiorWalls);\n    },\n    // Path showing the unfinished interior wall TODO: combine with previewPath\n    previewPath() {\n      let path = '';\n      if (this.drawMode === drawModes.OUTSIDEWALLS) {\n        if (this.exteriorWallpoints.length === 0) {\n          return util.coordToLine([]);\n        }\n        const prevWallpoint = this.exteriorWallpoints[this.exteriorWallpoints.length - 1];\n        const guideCoords = [prevWallpoint, this.nextCoord];\n        path = util.coordToLine(guideCoords);\n      } else if (this.drawMode === drawModes.INSIDEWALLS1) {\n        path = util.coordToLine([]);\n      } else if (this.drawMode === drawModes.INSIDEWALLS2) {\n        path = util.coordToLine([this.nextCoord, this.currentInteriorWall[0]]);\n      }\n      return path;\n    },\n    // Coordinate for calculating next point to save when clicked\n    nextCoord() {\n      let coord = [];\n\n      // Exterior walls are ensured to be on 90 degree angles\n      if (this.drawMode === drawModes.OUTSIDEWALLS) {\n        if (this.exteriorWallpoints.length === 0) {\n          return this.hoverCoord;\n        }\n        const prevWallpoint = this.exteriorWallpoints[this.exteriorWallpoints.length - 1];\n        coord = util.alignPoint(this.hoverCoord, prevWallpoint);\n      } else if (this.drawMode === drawModes.INSIDEWALLS1 ||\n          this.drawMode === drawModes.INSIDEWALLS2) {\n        if (this.nearestWall.distance < this.snapDistance) {\n          coord = this.nearestWall.wallPoint;\n        } else {\n          coord = this.hoverCoord;\n        }\n      }\n\n      if (this.drawMode === drawModes.INSIDEWALLS2) {\n        coord = util.alignPoint(coord, this.currentInteriorWall[0]);\n      }\n\n      return coord;\n    },\n    // Guidelines for next selected point\n    xGuidePath() {\n      if (this.nextCoord.length === 0) {\n        return util.coordToLine([]);\n      }\n      return util.coordToLine([[0, this.nextCoord[1]], [1200, this.nextCoord[1]]]);\n    },\n    yGuidePath() {\n      if (this.nextCoord.length === 0) {\n        return util.coordToLine([]);\n      }\n      return util.coordToLine([[this.nextCoord[0], 0], [this.nextCoord[0], 800]]);\n    },\n    // Circle in the beginning of exterior walls. It's also used for ending the exterior wall\n    exteriorBeginGuide() {\n      if (this.exteriorWallpoints.length === 0) {\n        return { x: -100, y: -100 };\n      }\n      const startPoint = this.exteriorWallpoints[0];\n      return {\n        x: startPoint[0],\n        y: startPoint[1],\n      };\n    },\n    // Visibility state for the drawing aids\n    guideVisibility() {\n      return this.editMode ? 'visible' : 'hidden';\n    },\n    // Calculated values and guide positions for wall lenghts\n    wallMeasurements() {\n      const measurementPoints = this.exteriorWallpoints.map((point, index) => {\n        if (index === 0) {\n          return null;\n        }\n        const prevPoint = this.exteriorWallpoints[index - 1];\n        const xDiff = prevPoint[0] + point[0];\n        const yDiff = prevPoint[1] + point[1];\n        const x = xDiff / 2;\n        const y = yDiff / 2;\n        const value = Math.sqrt(\n          Math.pow(point[0] - prevPoint[0], 2) +\n          Math.pow(point[1] - prevPoint[1], 2));\n        return {\n          x,\n          y,\n          value: `${(value * this.distanceFactor).toFixed(1)}m`,\n        };\n      })\n      .filter(point => point !== null);\n      if (this.editMode && this.nextCoord !== undefined && this.exteriorWallpoints.length > 0) {\n        const prevPoint = this.exteriorWallpoints[this.exteriorWallpoints.length - 1];\n        const xDiff = prevPoint[0] + this.nextCoord[0];\n        const yDiff = prevPoint[1] + this.nextCoord[1];\n        const x = xDiff / 2;\n        const y = yDiff / 2;\n        const value = Math.sqrt(\n          Math.pow(this.nextCoord[0] - prevPoint[0], 2) +\n          Math.pow(this.nextCoord[1] - prevPoint[1], 2));\n        const cursorPoint = {\n          x,\n          y,\n          value: `${(value * this.distanceFactor).toFixed(1)}m`,\n        };\n        measurementPoints.push(cursorPoint);\n      }\n      return measurementPoints;\n    },\n    straightPathToNearestWall() {\n      const line = this.nearestWall.line;\n      // const distance = this.nearestWall.distance;\n      const isHorizontal = line[0][1] === line[1][1];\n      return isHorizontal ?\n        util.coordToLine([this.hoverCoord, [this.hoverCoord[0], line[0][1]]]) :\n        util.coordToLine([this.hoverCoord, [line[0][0], this.hoverCoord[1]]]);\n    },\n    // Calculate info about the wall nearest to cursor\n    nearestWall() {\n      let nearestLine = {\n        line: [[], []],\n        distance: Number.MAX_SAFE_INTEGER,\n        path: '',\n        wallPoint: [],\n      };\n\n      this.exteriorWallpoints.forEach((point, index) => {\n        if (index === 0) {\n          return;\n        }\n        const prevPoint = this.exteriorWallpoints[index - 1];\n        const line = [prevPoint, point];\n        const distance = util.distanceToSegment(this.hoverCoord, line[0], line[1]);\n\n        const isHorizontal = line[0][1] === line[1][1];\n        const unclampedWallPoint = isHorizontal ?\n          [this.hoverCoord[0], line[0][1]] :\n          [line[0][0], this.hoverCoord[1]];\n        const wallPoint = util.clampPointToSegment(unclampedWallPoint, line);\n        const path = util.coordToLine([this.hoverCoord, wallPoint]);\n\n        if (distance < nearestLine.distance) {\n          nearestLine = {\n            line,\n            distance,\n            path,\n            wallPoint,\n          };\n        }\n      });\n\n      this.interiorWalls.forEach((wall) => {\n        const distance = util.distanceToSegment(this.hoverCoord, wall[0], wall[1]);\n        const isHorizontal = wall[0][1] === wall[1][1];\n        const unclampedWallPoint = isHorizontal ?\n          [this.hoverCoord[0], wall[0][1]] :\n          [wall[0][0], this.hoverCoord[1]];\n        const wallPoint = util.clampPointToSegment(unclampedWallPoint, wall);\n        const path = util.coordToLine([this.hoverCoord, wallPoint]);\n        if (distance < nearestLine.distance) {\n          nearestLine = {\n            line: wall,\n            distance,\n            path,\n            wallPoint,\n          };\n        }\n      });\n\n      return nearestLine;\n    },\n  },\n  methods: {\n    save() {\n      this.editMode = false;\n      this.instructionMessage = 'It\\'s gone.';\n    },\n  },\n  mounted() {\n    initDraw(this);\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.tool-wrapper {\n  height: 800px;\n  width: 1200px;\n  background-color: gray;\n  color: white;\n}\nsvg {\n  width: 100%;\n  height: 100%;\n}\n\n.exteriorWall, .wallPreview {\n  fill: none;\n  stroke: white;\n  stroke-width: 4px;\n}\n\n.wallPreview {\n  opacity: 0.5;\n}\n\n.interiorWall {\n  fill: none;\n  stroke: white;\n  stroke-width: 2px;\n}\n\n.guides {\n  fill: none;\n  stroke: white;\n  stroke-width: 1px;\n  stroke-opacity: 0.5;\n}\n.exteriorBeginGuide {\n  fill: black;\n}\n.guidePoint {\n  fill: white;\n  opacity: 0.5;\n}\n.guides > text {\n  fill: white;\n}\n.measurementRect {\n  fill: black;\n  stroke-width: 2px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Blueprint.vue?75e6b72a","\n/* styles */\nrequire(\"!!./../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../node_modules/vue-loader/lib/style-rewriter?id=data-v-35fcf742!./../node_modules/vue-loader/lib/selector?type=styles&index=0!./../node_modules/eslint-loader/index.js!./App.vue\")\n\nvar Component = require(\"/home/master/dev/ranchdata/blueprint-tool/node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../node_modules/vue-loader/lib/selector?type=script&index=0!./../node_modules/eslint-loader/index.js!./App.vue\"),\n  /* template */\n  require(\"!!./../node_modules/vue-loader/lib/template-compiler?id=data-v-35fcf742!./../node_modules/vue-loader/lib/selector?type=template&index=0!./../node_modules/eslint-loader/index.js!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 26\n// module chunks = 2","\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter?id=data-v-6efa3f6e&scoped=true!./../../node_modules/vue-loader/lib/selector?type=styles&index=0!./../../node_modules/eslint-loader/index.js!./Blueprint.vue\")\n\nvar Component = require(\"/home/master/dev/ranchdata/blueprint-tool/node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../../node_modules/vue-loader/lib/selector?type=script&index=0!./../../node_modules/eslint-loader/index.js!./Blueprint.vue\"),\n  /* template */\n  require(\"!!./../../node_modules/vue-loader/lib/template-compiler?id=data-v-6efa3f6e!./../../node_modules/vue-loader/lib/selector?type=template&index=0!./../../node_modules/eslint-loader/index.js!./Blueprint.vue\"),\n  /* scopeId */\n  \"data-v-6efa3f6e\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Blueprint.vue\n// module id = 27\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('Blueprint')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-35fcf742!./~/vue-loader/lib/selector.js?type=template&index=0!./~/eslint-loader!./src/App.vue\n// module id = 28\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"tool-wrapper\"\n  }, [(_vm.ready) ? _c('button', {\n    on: {\n      \"click\": _vm.save\n    }\n  }, [_vm._v(\"Save\")]) : _vm._e(), _vm._v(\" \"), _c('svg', {\n    staticClass: \"canvas\"\n  }, [_c('g', {\n    staticClass: \"walls\"\n  }, [_c('path', {\n    staticClass: \"exteriorWall\",\n    attrs: {\n      \"d\": _vm.exteriorWallsPath\n    }\n  }), _vm._v(\" \"), _c('path', {\n    staticClass: \"interiorWall\",\n    attrs: {\n      \"d\": _vm.interiorWallsPath\n    }\n  }), _vm._v(\" \"), _c('path', {\n    staticClass: \"wallPreview\",\n    attrs: {\n      \"d\": _vm.previewPath\n    }\n  })]), _vm._v(\" \"), _c('g', {\n    staticClass: \"guides\",\n    attrs: {\n      \"visibility\": _vm.guideVisibility\n    }\n  }, [_c('path', {\n    staticClass: \"guideline\",\n    attrs: {\n      \"d\": _vm.xGuidePath\n    }\n  }), _vm._v(\" \"), _c('path', {\n    staticClass: \"guideline\",\n    attrs: {\n      \"d\": _vm.yGuidePath\n    }\n  }), _vm._v(\" \"), _c('circle', {\n    staticClass: \"guidePoint\",\n    attrs: {\n      \"cx\": _vm.nextCoord[0],\n      \"cy\": _vm.nextCoord[1],\n      \"r\": \"10\"\n    }\n  }), _vm._v(\" \"), (_vm.currentInteriorWall.length > 0) ? _c('circle', {\n    staticClass: \"guidePoint\",\n    attrs: {\n      \"cx\": _vm.currentInteriorWall[0][0],\n      \"cy\": _vm.currentInteriorWall[0][1],\n      \"r\": \"10\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), _vm._l((_vm.wallMeasurements), function(point) {\n    return _c('rect', {\n      staticClass: \"measurementRect\",\n      attrs: {\n        \"x\": point.x - 50,\n        \"y\": point.y - 30,\n        \"width\": \"100\",\n        \"height\": \"30\"\n      }\n    })\n  }), _vm._v(\" \"), _vm._l((_vm.wallMeasurements), function(point) {\n    return _c('text', {\n      attrs: {\n        \"x\": point.x - 20,\n        \"y\": point.y - 10\n      }\n    }, [_vm._v(_vm._s(point.value))])\n  }), _vm._v(\" \"), _c('circle', {\n    staticClass: \"exteriorBeginGuide\",\n    attrs: {\n      \"cx\": _vm.exteriorBeginGuide.x,\n      \"cy\": _vm.exteriorBeginGuide.y,\n      \"r\": \"10\"\n    }\n  })], 2)]), _vm._v(\"\\n  \" + _vm._s(_vm.instructionMessage) + \"\\n\")])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-6efa3f6e!./~/vue-loader/lib/selector.js?type=template&index=0!./~/eslint-loader!./src/components/Blueprint.vue\n// module id = 29\n// module chunks = 2"],"sourceRoot":""}